import"./helper-b8faab3a.js";import{U as p,$ as d,F as _,Y as E,W as D}from"./tw-elements.es.min-3618d1f1.js";p({Datepicker:_,Timepicker:E,Input:D,Select:d});console.debug(midwives);const c={midwife:null,schedules:[]},g=document.getElementById("midwife");new d(g,{});g.addEventListener("valueChange.te.select",e=>{const t=midwives.find(s=>s.id==e.value);if(!t)return;c.midwife=t,c.schedules=t.schedules??[];const n=l.querySelector("input");n.value="",n.focus(),F.setValue("")});const l=document.getElementById("date"),y=1e3*60*60*24,i=new Date,b=new Date(i.getTime()+y*1),k=new Date(i.getTime()+y*7);new _(l,{filter:e=>{const t=e.getMonth()==i.getMonth(),n=e.getFullYear()==i.getFullYear(),s=e.getDate()<b.getDate(),o=c.schedules.find(v=>e.getDay()==w(v.day)),a=e.getDate()>k.getDate(),h=e.getDay()==6,f=e.getDay()==0;return t&&n&&!s&&!!o&&!a&&!h&&!f}});l.addEventListener("dateChange.te.datepicker",e=>{const t=c.schedules.filter(s=>w(s.day)==e.date.getDay()),n=document.createElement("option");n.value="",n.hidden=!0,n.selected=!0,r.replaceChildren(n),x.forEach(s=>{const o=document.createElement("option");o.value=s.value,o.textContent=s.label,o.disabled=!t.some(a=>T(s.value*36e5,a.started_at,a.ended_at)),r.append(o)})});const r=document.getElementById("time"),C=8,I=12,$=new Array(I).fill(0).map((e,t)=>{const n=t+C,s=n<10?`0${n}`:n;return{label:`${s}:00 - ${s}:55`,value:n}}),B=["12","16","17"],x=$.filter(e=>!B.find(n=>n==e.value)),F=new d(r,{});r.addEventListener("valueChange.te.select",e=>{});const u=document.getElementById("location"),L=document.getElementById("position"),Y=document.getElementById("toggle_location");Y.addEventListener("click",e=>{navigator.geolocation.getCurrentPosition(t=>{console.debug(t),u.value="Current Position",u.focus(),L.value=`[${t.coords.longitude},${t.coords.latitude}]`},t=>{throw console.debug(t),t},{enableHighAccuracy:!0})});function w(e){switch(e){case"sunday":return 0;case"monday":return 1;case"tuesday":return 2;case"wednesday":return 3;case"thursday":return 4;case"friday":return 5;case"saturday":return 6;default:throw new Error("unknown day")}}function T(e,t,n){const[s,o]=A(t,n);return s<=e&&e<=o}function A(e,t){return[m(e),m(t)]}function m(e){const[t,n,s]=e.split(":");let o=0;return o+=t*36e5,o+=n*6e4,o+=s*1e3,o}
