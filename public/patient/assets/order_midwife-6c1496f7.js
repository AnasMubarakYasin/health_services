import"./helper-b8faab3a.js";import{U as p,F as m,$ as g,Y as v,W as D}from"./tw-elements.es.min-3618d1f1.js";p({Datepicker:m,Timepicker:v,Input:D,Select:g});console.debug(midwife,schedules,orders);schedules=schedules.filter(e=>e.active);const h=document.getElementById("date"),y=1e3*60*60*24,d=new Date,E=new Date(d.getTime()+y*1),b=new Date(d.getTime()+y*7);new m(h,{filter:e=>{const t=e.getMonth()==d.getMonth(),s=e.getFullYear()==d.getFullYear(),o=e.getDate()<E.getDate(),n=schedules.find(f=>e.getDay()==w(f.day)),c=e.getDate()>b.getDate(),a=e.getDay()==6,r=e.getDay()==0;return t&&s&&!o&&!!n&&!c&&!a&&!r}});h.addEventListener("dateChange.te.datepicker",e=>{const t=schedules.filter(n=>e.date.getDay()==w(n.day)),s=orders.filter(n=>e.date.getDate()==new Date(n.schedule).getDate()),o=document.createElement("option");o.value="",o.hidden=!0,o.selected=!0,i.replaceChildren(o),B.forEach(n=>{const c=n.value*36e5,a=document.createElement("option");a.value=n.value,a.textContent=n.label,a.disabled=!t.some(r=>u(c,r.started_at,r.ended_at)),!a.disabled&&(a.disabled=s.some(r=>u(c,r.schedule_start,r.schedule_end))),i.append(a)})});const i=document.getElementById("time"),k=8,$=12,C=new Array($).fill(0).map((e,t)=>{const s=t+k,o=s<10?`0${s}`:s;return{label:`${o}:00 - ${o}:55`,value:s}}),I=["12","16","17"],B=C.filter(e=>!I.find(s=>s==e.value));new g(i,{});i.addEventListener("valueChange.te.select",e=>{});const l=document.getElementById("location"),x=document.getElementById("position"),F=document.getElementById("toggle_location");F.addEventListener("click",e=>{navigator.geolocation.getCurrentPosition(t=>{console.debug(t),l.value="Current Position",l.focus(),x.value=`[${t.coords.longitude},${t.coords.latitude}]`},t=>{throw console.debug(t),t},{enableHighAccuracy:!0})});function w(e){switch(e){case"sunday":return 0;case"monday":return 1;case"tuesday":return 2;case"wednesday":return 3;case"thursday":return 4;case"friday":return 5;case"saturday":return 6;default:throw new Error("unknown day")}}function u(e,t,s){const[o,n]=Y(t,s);return o<=e&&e<=n}function Y(e,t){return[_(e),_(t)]}function _(e){const[t,s,o]=e.split(":");let n=0;return n+=t*36e5,n+=s*6e4,n+=o*1e3,n}
