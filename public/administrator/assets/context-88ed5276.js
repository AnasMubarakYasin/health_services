import{P as r}from"./helper-b8faab3a.js";class c{}class h{}const i=class a{constructor(t="_"){this.key=t,this.state=new c,this.action=new h,this.event=new EventTarget,this.media_query={sm:null},this.state_init=new r}static get_or_create(t){let s=this.instance.get(t);return s||(s=this.create(t)),s}static get(t){return this.instance.get(t)}static create(t){const s=new a(t);return this.instance.set(t,s),s}init(){this.load(),this.media_query.sm=matchMedia("(max-width: 640px)"),this.state_init.resolver()}inited(){return this.state_init}update(t,s=!0){this.state={...this.state,...t},s&&this.save()}set_state(t,s){this.state[t]=s}sync_state(t,s,e){t in this.state?e==null||e(this.state[t]):this.state[t]=s}load(){const t=localStorage.getItem(this.key);t&&(this.state=JSON.parse(t))}save(){localStorage.setItem(this.key,JSON.stringify(this.state))}};i.instance=new Map;let l=i;export{l as C};
